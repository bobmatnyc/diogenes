---
timestamp: 2025-09-10T11:15:08.781449
type: agent_research
metadata: {"agent_type": "research", "agent_id": "research_6d4c8529-646d-47a1-972b-0c2d4afbdd21", "session_id": "6d4c8529-646d-47a1-972b-0c2d4afbdd21", "delegation_context": {"description": "Fix Clerk SSL localhost issue", "timestamp": "2025-09-10T11:15:08.780576"}}
---


AGENT MEMORY - PROJECT-SPECIFIC KNOWLEDGE:
# Agent Memory: research
<!-- Last Updated: 2025-09-09T02:43:00.000000Z -->

## Project: Diogenes - Contrarian AI Chatbot

### Architecture Patterns
- **Multi-Agent System**: Uses Claude 3.5 Sonnet for analysis + Perplexity Sonar for search
- **Edge Runtime**: Critical for Vercel deployment and streaming performance
- **Hybrid Delegation**: Intelligent routing between philosophical response and web search
- **Token Tracking**: Real-time tiktoken-based usage monitoring

### Key Technical Decisions  
- **OpenRouter Integration**: Single API for multiple LLM models (Claude + Perplexity)
- **Vercel AI SDK**: OpenAIStream + StreamingTextResponse for real-time streaming
- **localStorage Sessions**: Client-side persistence without backend complexity
- **TypeScript + Zod**: Full type safety with runtime validation

### Critical Components
- `/src/app/api/chat/route.ts` - Main streaming API with delegation
- `/src/lib/agents/delegation-handler.ts` - Multi-agent orchestration  
- `/src/lib/prompts/core-principles.ts` - 600+ word Diogenes character prompt
- `CLAUDE.md` - Comprehensive AI agent documentation with priority system

### Optimization Patterns
- **Single-Path Workflows**: Makefile with `make dev`, `make build`, `make deploy`
- **Documentation Hierarchy**: README â†’ CLAUDE.md â†’ STRUCTURE.md
- **Priority System**: ðŸ”´ Critical, ðŸŸ¡ Important, ðŸŸ¢ Standard, âšª Optional
- **Edge Runtime**: Explicit configuration for global performance


INSTRUCTIONS: Review your memory above before proceeding. Apply learned patterns and avoid known mistakes.


The user is getting an SSL error when trying to access accounts.diogenes.live for Clerk authentication. This is a common issue with custom domains and localhost development.

ERROR:
"The connection for this site is not secure
accounts.diogenes.live uses an unsupported protocol.
ERR_SSL_VERSION_OR_CIPHER_MISMATCH"

CONTEXT:
- Using Clerk test keys
- Running on localhost:3000
- The publishable key appears to be for a custom domain (diogenes.live)
- This is causing SSL/certificate issues

REQUIREMENTS:
1. Research Clerk best practices for localhost development
2. Check if we should be using a different Clerk instance for localhost
3. Investigate if we need to use Clerk's default development domain instead of custom domain
4. Check the publishable key format - it may be encoding the wrong domain
5. Provide solution for proper localhost development with Clerk
6. Update configuration to fix the SSL error

BEST PRACTICES TO INVESTIGATE:
- Using Clerk development instances vs production
- Localhost authentication flow with Clerk
- Proper domain configuration for development
- SSL certificate handling in development

Please fix this SSL error and configure Clerk properly for localhost development.